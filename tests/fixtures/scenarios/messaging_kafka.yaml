# Scenario fixture for Kafka topic/consumer management.
# Schema: id, description, steps[{command, expected_pack, expected_decision, reason}]

id: "messaging.kafka.topic_maintenance"
description: "Operator inspects Kafka topics and consumer groups, then attempts deletions."
steps:
  - command: "kafka-topics --bootstrap-server localhost:9092 --list"
    expected_pack: "messaging.kafka"
    expected_decision: "allow"
    reason: "List topics"
  - command: "kafka-topics --bootstrap-server localhost:9092 --describe --topic orders"
    expected_pack: "messaging.kafka"
    expected_decision: "allow"
    reason: "Describe topic configuration"
  - command: "kafka-consumer-groups --bootstrap-server localhost:9092 --list"
    expected_pack: "messaging.kafka"
    expected_decision: "allow"
    reason: "List consumer groups"
  - command: "kafka-topics --bootstrap-server localhost:9092 --delete --topic orders"
    expected_pack: "messaging.kafka"
    expected_decision: "deny"
    reason: "Deletes topic data"
  - command: "kafka-consumer-groups --bootstrap-server localhost:9092 --delete --group analytics"
    expected_pack: "messaging.kafka"
    expected_decision: "deny"
    reason: "Deletes consumer group offsets"
  - command: "kafka-delete-records --bootstrap-server localhost:9092 --offset-json-file delete.json"
    expected_pack: "messaging.kafka"
    expected_decision: "deny"
    reason: "Deletes records up to specified offsets"
